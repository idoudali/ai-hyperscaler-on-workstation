---
# HPC Cluster Deployment Playbook
# This playbook deploys and configures a complete HPC cluster with SLURM

- name: Deploy HPC Cluster
  hosts: hpc_cluster
  become: true
  gather_facts: true

  vars:
    # HPC Cluster Configuration
    slurm_version: "23.11.4"
    # NVIDIA GPU Configuration for HPC workloads
    nvidia_install_cuda: true
    # Enable Packer build mode (suppresses reboot warnings)
    nvidia_packer_build: true

  roles:
    - hpc-base-packages
    - nvidia-gpu-drivers

  tasks:
    - name: HPC cluster deployment complete
      debug:
        msg: "HPC base packages have been installed successfully"
