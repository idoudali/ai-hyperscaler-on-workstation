# NVIDIA GPU Drivers Role - Handlers
# Handlers for NVIDIA driver installation tasks

- name: update apt cache
  ansible.builtin.apt:
    update_cache: true

- name: update initramfs
  ansible.builtin.command: update-initramfs -u -k all
  changed_when: true
  notify: reboot required

- name: reboot required
  ansible.builtin.debug:
    msg: |
      {% if nvidia_packer_build | default(false) %}
      Initramfs updated during Packer build - changes will take effect on image deployment
      {% else %}
      System reboot is required for changes to take effect
      {% endif %}
