---
# SLURM Controller Role - Main Tasks
# This file orchestrates the main tasks for SLURM controller setup
# including package installation, configuration, MUNGE setup, and service management

- name: Include SLURM controller installation tasks
  include_tasks: install.yml
  tags:
    - slurm
    - slurm-controller
    - install

- name: Include SLURM controller configuration tasks
  include_tasks: configure.yml
  tags:
    - slurm
    - slurm-controller
    - configure

- name: Include MUNGE authentication setup tasks
  include_tasks: munge.yml
  tags:
    - slurm
    - slurm-controller
    - munge
    - auth

- name: Include SLURM job accounting configuration tasks
  include_tasks: accounting.yml
  when:
    - not (packer_build | default(false))
    - setup_slurm_accounting | default(false)
  tags:
    - slurm
    - slurm-controller
    - accounting
    - database
