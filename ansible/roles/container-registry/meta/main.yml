# Container Registry Role - Dependencies and Metadata
# Storage-agnostic container registry with configurable backend dependencies

galaxy_info:
  author: AI-HOW Project
  description: Storage-agnostic container registry infrastructure for HPC clusters
  company: AI-HOW
  license: MIT
  min_ansible_version: "2.9"
  platforms:
    - name: Ubuntu
      versions:
        - focal
        - jammy
    - name: Debian
      versions:
        - bullseye
        - bookworm
  galaxy_tags:
    - containers
    - registry
    - storage
    - hpc

dependencies:
  # Storage backend dependencies are configured via variables
  # This allows the role to work with different storage backends
  - role: beegfs-client
    when: container_registry_storage_backend == 'beegfs'
    vars:
      # Ensure BeeGFS is fully deployed before container registry
      beegfs_client_mount_enabled: true
      beegfs_client_mount_state: mounted
